<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo de Agricultura</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #b7e3a1;
            font-family: Arial, sans-serif;
            color: #333;
        }

        canvas {
            border: 2px solid #333;
            background-color: #f3f3f3;
        }

        .score {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 20px;
            color: #333;
        }

        .instructions {
            position: absolute;
            bottom: 20px;
            font-size: 16px;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="score">Pontos: 0</div>
    <div class="instructions">Clique para plantar sementes. Espere para colher!</div>
    <canvas id="gameCanvas" width="600" height="400"></canvas>

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");

        const gridSize = 60; // Tamanho de cada célula do campo
        const rows = 6;  // Número de linhas
        const cols = 10; // Número de colunas
        let score = 0;   // Pontuação
        let plants = []; // Array para armazenar as plantas

        // Função para desenhar o campo e as plantas
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height); // Limpa o canvas

            // Desenha o campo (grid)
            for (let row = 0; row < rows; row++) {
                for (let col = 0; col < cols; col++) {
                    ctx.strokeStyle = "#777";
                    ctx.strokeRect(col * gridSize, row * gridSize, gridSize, gridSize); // Desenha cada célula
                }
            }

            // Desenha as plantas no campo
            plants.forEach(plant => {
                if (plant.state === "planted") {
                    ctx.fillStyle = "#7DFF7D"; // Cor das plantas (verde)
                    ctx.beginPath();
                    ctx.arc(plant.x * gridSize + gridSize / 2, plant.y * gridSize + gridSize / 2, gridSize / 4, 0, Math.PI * 2);
                    ctx.fill();
                } else if (plant.state === "grown") {
                    ctx.fillStyle = "#FFD700"; // Cor das plantas crescidas (amarelo)
                    ctx.beginPath();
                    ctx.arc(plant.x * gridSize + gridSize / 2, plant.y * gridSize + gridSize / 2, gridSize / 4, 0, Math.PI * 2);
                    ctx.fill();
                }
            });

            // Atualiza a pontuação
            document.querySelector(".score").textContent = `Pontos: ${score}`;
        }

        // Função para plantar uma semente
        function plantSeed(x, y) {
            if (!isOccupied(x, y)) {
                plants.push({
                    x: x,
                    y: y,
                    state: "planted",
                    growthTime: 5000, // Tempo para crescer em milissegundos
                    growthTimer: Date.now(),
                });
            }
        }

        // Função para verificar se uma célula está ocupada
        function isOccupied(x, y) {
            return plants.some(plant => plant.x === x && plant.y === y && plant.state !== "harvested");
        }

        // Função para colher as plantas
        function harvest(x, y) {
            const plant = plants.find(p => p.x === x && p.y === y && p.state === "grown");
            if (plant) {
                plant.state = "harvested";  // Marca como colhida
                score += 10; // Incrementa a pontuação
            }
        }

        // Função para atualizar o estado das plantas
        function updatePlants() {
            plants.forEach(plant => {
                if (plant.state === "planted" && Date.now() - plant.growthTimer >= plant.growthTime) {
                    plant.state = "grown"; // Planta cresce após o tempo
                }
            });
        }

        // Função para tratar o clique do mouse
        canvas.addEventListener("click", (event) => {
            const x = Math.floor(event.offsetX / gridSize); // Calcula a posição em X
            const y = Math.floor(event.offsetY / gridSize); // Calcula a posição em Y

            // Se a planta já estiver crescida, colher
            if (plants.some(plant => plant.x === x && plant.y === y && plant.state === "grown")) {
                harvest(x, y);
            } else {
                plantSeed(x, y); // Caso contrário, plantar uma semente
            }
        });

        // Função principal do jogo
        function gameLoop() {
            updatePlants(); // Atualiza as plantas (para ver se cresceram)
            draw(); // Desenha o campo, as plantas e a pontuação
            requestAnimationFrame(gameLoop); // Loop do jogo
        }

        gameLoop(); // Inicia o loop do jogo
    </script>
</body>
</html>
