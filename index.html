<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo da Cobrinha</title>
    <style>
        body {
            text-align: center;
            font-family: Arial, sans-serif;
        }
        canvas {
            border: 1px solid #000;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Jogo da Cobrinha</h1>
    <canvas id="gameCanvas" width="600" height="400"></canvas>

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");

        const tamanhoBloco = 20;
        const larguraCanvas = canvas.width;
        const alturaCanvas = canvas.height;

        let cobra = [{x: 100, y: 100}];
        let direcao = 'direita';
        let comida = gerarComida();
        let pontuacao = 0;
        let jogoAtivo = true;

        // Função para desenhar a cobrinha
        function desenharCobrinha() {
            ctx.fillStyle = "green";
            cobra.forEach(segmento => {
                ctx.fillRect(segmento.x, segmento.y, tamanhoBloco, tamanhoBloco);
            });
        }

        // Função para gerar comida
        function gerarComida() {
            return {
                x: Math.floor(Math.random() * (larguraCanvas / tamanhoBloco)) * tamanhoBloco,
                y: Math.floor(Math.random() * (alturaCanvas / tamanhoBloco)) * tamanhoBloco
            };
        }

        // Função para desenhar a comida
        function desenharComida() {
            ctx.fillStyle = "red";
            ctx.fillRect(comida.x, comida.y, tamanhoBloco, tamanhoBloco);
        }

        // Função para movimentar a cobrinha
        function moverCobrinha() {
            const cabeça = { ...cobra[0] };

            if (direcao === 'cima') cabeça.y -= tamanhoBloco;
            if (direcao === 'baixo') cabeça.y += tamanhoBloco;
            if (direcao === 'esquerda') cabeça.x -= tamanhoBloco;
            if (direcao === 'direita') cabeça.x += tamanhoBloco;

            cobra.unshift(cabeça);

            // Verificar se a cobra comeu a comida
            if (cabeça.x === comida.x && cabeça.y === comida.y) {
                pontuacao++;
                comida = gerarComida();
            } else {
                cobra.pop(); // Remover o último segmento da cobra
            }
        }

        // Função para verificar colisões
        function verificarColisoes() {
            const cabeça = cobra[0];

            // Colisão com as bordas
            if (cabeça.x < 0 || cabeça.x >= larguraCanvas || cabeça.y < 0 || cabeça.y >= alturaCanvas) {
                jogoAtivo = false;
            }

            // Colisão com o corpo
            for (let i = 1; i < cobra.length; i++) {
                if (cabeça.x === cobra[i].x && cabeça.y === cobra[i].y) {
                    jogoAtivo = false;
                }
            }
        }

        // Função para desenhar o texto da pontuação
        function desenharPontuacao() {
            ctx.fillStyle = "black";
            ctx.font = "20px Arial";
            ctx.fillText("Pontuação: " + pontuacao, 10, 30);
        }

        // Função principal do jogo
        function atualizarJogo() {
            if (!jogoAtivo) {
                ctx.fillStyle = "black";
                ctx.font = "30px Arial";
                ctx.fillText("Game Over!", larguraCanvas / 3, alturaCanvas / 2);
                return;
            }

            ctx.clearRect(0, 0, larguraCanvas, alturaCanvas); // Limpar o canvas
            moverCobrinha();
            verificarColisoes();
            desenharCobrinha();
            desenharComida();
            desenharPontuacao();

            setTimeout(atualizarJogo, 100); // Chama novamente para continuar o jogo
        }

        // Função para capturar as teclas pressionadas
        document.addEventListener('keydown', function (event) {
            if (event.key === 'ArrowUp' && direcao !== 'baixo') direcao = 'cima';
            if (event.key === 'ArrowDown' && direcao !== 'cima') direcao = 'baixo';
            if (event.key === 'ArrowLeft' && direcao !== 'direita') direcao = 'esquerda';
            if (event.key === 'ArrowRight' && direcao !== 'esquerda') direcao = 'direita';
        });

        // Iniciar o jogo
        atualizarJogo();
    </script>
</body>
</html>
